Performing complex operations on battery-less energy harvesting embedded platforms is challenging from many points of view. Here we shall briefly provide a background on computation with energy harvesting embedded systems. 

\subsection{Energy Harvesting: Background}

Supplying power to tiny embedded computers using batteries alone is not sustainable. European Commission estimates that more than 160 kilotons of consumer batteries enter the European Union annually~\cite{eu_batteries_2016}. Since not all batteries are recycled, they constitute a potential environmental hazard. A potent solution is to replace batteries with smaller, but environment friendly {(super-)capacitors} (promising millions of charge/discharge cycles~\cite[Sec. I]{ongaro_pwre_2012}) and to supply them {\em directly from the ambient energy sources}---creating a truly self-sustainable computing device. The limitation of the capacitor as storage is its lower than battery energy density, making effective capacitor discharge times orders of magnitude smaller than for a battery.

Given current technology development, battery-less systems are best suited for very long-term sensing and monitoring where access to recharge is either prohibitive or impossible. These include battery-less image capture and processing~\cite{naderiparizi_rfid_2015}, insect monitoring~\cite{thomas_jbcs_2012} or implantable~\cite{rodriguez_tbcs_2015}  and digestible~\cite{nadeau_naturebio_2017} sensors.

Many platforms enable intermittent, battery-less computation. For instance, computation RFIDs---open-source TI MSP430-based~\cite{wolverine} WISP~\cite{wisp5} (with its variants such as WISPCam~\cite{naderiparizi_rfid_2015}, NFC-WISP~\cite{zhao_rfid_2015} or NeuralWISP~\cite{holleman_biocas_2008}), Moo~\cite{moo}, and commercial ones such as~\cite{medusa_farsens_2017}. Other intermittently-powered platforms include ambient backscatter tag~\cite{liu_sigcomm_2013,parks_sigcomm_2014} or battery-less phone~\cite{talla_imwut_2017}. In all of the above, the main source of energy harvested is the electromagnetic radiation in the radio frequency range (ambient transmitters such as high power TV transmitters~\cite{liu_sigcomm_2013} or dedicated RFID antenna~\cite{wisp5,moo,talla_imwut_2017,medusa_farsens_2017,holleman_biocas_2008,naderiparizi_rfid_2015}). Naturally, other forms of energy harvesting sources exist, including temperature gradient, (micro-)motions, light/sun radiation, vibrations, and body fluid flow (blood, gastric acid). The reader is referred to example extensive surveys discussing energy harvesting for low-power embedded systems~\cite{paradiso_pvc_2005,soyata_csm_2016,prasad_comst_2014,ku_cst_2016}.

\begin{table}
	\begin{tabular}{|c|c|}
	\hline
	Platform name & Storage capacitor size \\
	\hline \hline
	Moo~\cite{moo} & 0.1\,F \\
	WISPCam~\cite{naderiparizi_rfid_2015} & 6.08\,mF \\ %tested [11.24, 17.45, 21.98]\,mF
	NFC-WISP~\cite{zhao_rfid_2015} & 300\,$\mu$F \\
	NeuralWISP~\cite{holleman_biocas_2008} & 100\,$\mu$F \\
	WISP~\cite{wisp5} & 47\,$\mu$F \\
	{\em BioImpedance} sensor~\cite{rodriguez_tbcs_2015} & 20\,$\mu$F \\
	{\em Ingestible} sensor~\cite{nadeau_naturebio_2017} & 220\,$\mu$F\\
	\hline
	\end{tabular} 
\caption{Comparison of {\em default} energy storage sizes for various battery-less platforms. Observe a huge variation in storage capacity. We note that values for other representative platforms~\cite{medusa_farsens_2017,talla_imwut_2017,liu_sigcomm_2013,parks_sigcomm_2014} were not reported in their respective papers.}
\label{table:capacitor}
\end{table}

The biggest technical problem with energy provided from the ambient to battery-less platforms is that harvested energy is not stable and difficult to predict accurately. Combined with the fact that energy supply is small, there is little leeway to store enough of energy to guarantee prolonged periods of computation. Energy breaks happen every hundred of milliseconds, refer again to e.g.~\cite[Fig. 1]{mementos}. This causes each program running on such platform to restart. Solution to the problem is to divide the program into smaller parts that guarantee execution within a discharge region and track the state of the program in-between execution times.

\subsection{(Task-based) Intermittent Computing: Background}

\begin{figure}
	\centering
	%\includegraphics[width=0.25\columnwidth]{figures/}
	\caption{Two problems with fixed-size task in intermittent execution. (a) task underestimation: task executed at device with capacitor size $X$, will not execute at device with capacitor $X\gg Y$; (b) task overestimation: with stable energy source task tracking causes unnecessary overhead.}
	\label{fig:fixed_task_problem}
\end{figure}

Moreover, each battery-less platform has different storage sizes, refer to Table~\ref{table:capacitor}, which causes different charge/discharge periods. This result in different execution times. In the worst case the size of the capacitor might be too small to execute one task written by the programmer.

We can write the problem of maximizing all task sizes formally as
%
\begin{equation}
\underset{i}{\arg\,\max} \sum_{i}m_i+t_i \text{~subject to~} \forall_i mi+t_i>e,
\end{equation}
%
where $e$ is the required minimum energy to perform a task, $i$ is the total number of tasks, $m_i$ and $t_i$ are the cost of task traversal (memory copying time of task variables) and time to complete one task, respectively.

Other forms of intermittent platforms will share the same problem. One of them considers actuation platforms, which will be powered directly from energy harvesting sources~\cite{}. will share the energy storage with computing platform. However, power supply for actuators is order of magnitude larger than for computation. Therefore, although capacitor is large enough to perform computation alone, energy to power actuators takes precedence leaving not much space for computing.

%prior systems do fine grained task division (virtualization) {clank,aplaca}

\TODO{Elaborate on the ``key challenge'' paragraphs near the end of the intro.}
